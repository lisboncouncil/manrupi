if(!Object.fromEntries)Object.fromEntries=function(b){var c={};b=b[Symbol.iterator].call(b);for(var d=b.next();!d.done;d=b.next()){d=d.value;c[d[0]]=d[1]}return c}
class LiteYTEmbed extends HTMLElement{connectedCallback(){this.videoId=this.getAttribute("videoid");let a=this.querySelector(".lty-playbtn");this.playLabel=a&&a.textContent.trim()||this.getAttribute("playlabel")||"Play";this.dataset.title=this.getAttribute("title")||"";this.style.backgroundImage||(this.style.backgroundImage=`url("https://i.ytimg.com/vi/${this.videoId}/hqdefault.jpg")`,this.upgradePosterImage());a||(a=document.createElement("button"),a.type="button",a.classList.add("lty-playbtn"),
this.append(a));if(!a.textContent){const b=document.createElement("span");b.className="lyt-visually-hidden";b.textContent=this.playLabel;a.append(b)}this.addNoscriptIframe();"A"===a.nodeName&&(a.removeAttribute("href"),a.setAttribute("tabindex","0"),a.setAttribute("role","button"),a.addEventListener("keydown",b=>{if("Enter"===b.key||" "===b.key)b.preventDefault(),this.activate()}));this.addEventListener("pointerover",LiteYTEmbed.warmConnections,{once:!0});this.addEventListener("focusin",LiteYTEmbed.warmConnections,
{once:!0});this.addEventListener("click",this.activate);this.needsYTApi=this.hasAttribute("js-api")||navigator.vendor.includes("Apple")||navigator.userAgent.includes("Mobi")}static addPrefetch(a,b,c){const d=document.createElement("link");d.rel=a;d.href=b;c&&(d.as=c);document.head.append(d)}static warmConnections(){LiteYTEmbed.preconnected||(LiteYTEmbed.addPrefetch("preconnect","https://www.youtube-nocookie.com"),LiteYTEmbed.addPrefetch("preconnect","https://www.google.com"),LiteYTEmbed.addPrefetch("preconnect",
"https://googleads.g.doubleclick.net"),LiteYTEmbed.addPrefetch("preconnect","https://static.doubleclick.net"),LiteYTEmbed.preconnected=!0)}fetchYTPlayerApi(){window.YT||window.YT&&window.YT.Player||(this.ytApiPromise=new Promise((a,b)=>{var c=document.createElement("script");c.src="https://www.youtube.com/iframe_api";c.async=!0;c.onload=d=>{YT.ready(a)};c.onerror=b;this.append(c)}))}async getYTPlayer(){this.playerPromise||await this.activate();return this.playerPromise}async addYTPlayerIframe(){this.fetchYTPlayerApi();
await this.ytApiPromise;const a=document.createElement("div");this.append(a);const b=Object.fromEntries(this.getParams().entries());this.playerPromise=new Promise(c=>{let d=new YT.Player(a,{width:"100%",videoId:this.videoId,playerVars:b,events:{onReady:e=>{e.target.playVideo();c(d)}}})})}addNoscriptIframe(){const a=this.createBasicIframe(),b=document.createElement("noscript");b.innerHTML=a.outerHTML;this.append(b)}getParams(){const a=new URLSearchParams(this.getAttribute("params")||[]);a.append("autoplay",
"1");a.append("playsinline","1");return a}async activate(){if(!this.classList.contains("lyt-activated")){this.classList.add("lyt-activated");if(this.needsYTApi)return this.addYTPlayerIframe(this.getParams());var a=this.createBasicIframe();this.append(a);a.focus()}}createBasicIframe(){const a=document.createElement("iframe");a.width=560;a.height=315;a.title=this.playLabel;a.allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture";a.allowFullscreen=!0;a.src=`https://www.youtube-nocookie.com/embed/${encodeURIComponent(this.videoId)}?${this.getParams().toString()}`;
return a}upgradePosterImage(){setTimeout(()=>{const a=`https://i.ytimg.com/vi_webp/${this.videoId}/sddefault.webp`,b=new Image;b.fetchPriority="low";b.referrerpolicy="origin";b.src=a;b.onload=c=>{if(90!=c.target.naturalHeight||120!=c.target.naturalWidth)this.style.backgroundImage=`url("${a}")`}},100)}}customElements.define("lite-youtube",LiteYTEmbed);
